
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Argument Writing Trainer - Dark Mode</title>
  <style>
    :root { color-scheme: dark; }
    body {
      font-family: system-ui;
      max-width: 1000px;
      margin: 20px auto;
      padding: 0 16px 32px;
      line-height: 1.6;
      background: #0f172a;
      color: #e5e7eb;
    }
    .card {
      background: #020617;
      border-radius: 14px;
      padding: 16px 18px;
      box-shadow: 0 18px 40px rgba(15,23,42,0.75);
      border: 1px solid #1f2937;
      margin-bottom: 18px;
    }
    select, textarea, button { font-size: 1rem; }
    select {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      min-width: 320px;
      background: #020617;
      color: #e5e7eb;
    }
    .topic-box {
      border-radius: 10px;
      padding: 10px 12px;
      background: #020617;
      border: 1px solid #1f2937;
      margin-top: 10px;
    }
    textarea {
      width: 100%;
      height: 220px;
      padding: 10px;
      border-radius: 10px;
      background: #020617;
      color: #e5e7eb;
      border: 1px solid #374151;
    }
    button.primary {
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      border-radius: 999px;
      padding: 8px 16px;
      font-weight: 600;
      cursor: pointer;
    }
    button.secondary {
      background: #111827;
      border: 1px solid #374151;
      padding: 8px 16px;
      border-radius: 999px;
      color: #e5e7eb;
      cursor: pointer;
    }
    .list-box {
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 10px;
      padding: 10px;
      max-height: 260px;
      overflow: auto;
    }
    .columns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
    }
    .small {
      padding: 4px 10px;
      background: #0f172a;
      border: 1px solid #374151;
      border-radius: 999px;
      color: #e5e7eb;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .sample-box {
      margin-top: 6px;
      font-size: 0.9rem;
      color: #9ca3af;
      line-height: 1.4;
    }
    #result { margin-top: 10px; font-size: 0.95rem; }
    .result-section h3 { margin-top: 0.6rem; margin-bottom: 0.2rem; }
    .note {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-top: 4px;
    }
    .answer-audio-controls {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      font-size: 0.85rem;
      color: #9ca3af;
    }
    .answer-audio-controls input[type="range"] {
      width: 140px;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>Argument Writing Trainer <span class="accent">Dark</span></h1>
  </div>

  <div class="card">
    <label for="topicSelect">トピックを選んでください：</label><br>
    <select id="topicSelect"></select>

    <div class="topic-box">
      <div id="topicSentence" style="margin-top:6px;"></div>
    </div>

    <div class="columns">
      <div class="list-box">
        <h3>肯定的な理由（Pro reasons）</h3>
        <ul id="proList"></ul>
      </div>
      <div class="list-box">
        <h3>反駁例（Counter-arguments）</h3>
        <div id="rebuttalList"></div>
      </div>
    </div>

    <div style="margin-top:10px;">
      <span>反駁例の読み上げ速度：</span>
      <input type="range" id="rateRange" min="0.6" max="1.4" step="0.05" value="0.95">
      <span id="rateLabel">0.95</span>
      <button id="stopAllBtn" class="small">■ 停止</button>
    </div>
  </div>

  <div class="card">
    <h2>あなたの反駁ライティング</h2>

    <div class="sample-box">
      ★ I agree with you to some extent, but I don't think it is a good idea. That's because<br>
      ★ That makes sense, but I would argue that 
    </div>

    <textarea id="writingArea" placeholder="Write your counter-argument here..."></textarea>
    <div>
      <button id="analyzeBtn" class="primary">終了／添削</button>
      <button id="clearBtn" class="secondary">クリア</button>
    </div>
    <div class="note">
      ※ 添削は語数チェック＋自分の英作文の読み上げのみです。
    </div>
  </div>

  <div class="card" id="result">
    （添削結果がここに表示されます）
  </div>

  <script>
    const topics = [
      {
        sentence:"We should celebrate Japanese athletes successful in the world on our money.",
        pros:[
          "They inspire many young people in Japan.",
          "Their achievements make Japan more famous in the world.",
          "They are great role models for society.",
          "Sports unite people and create positive feelings.",
          "Athletes show hard work and discipline.",
          "Their stories encourage students to try new things.",
          "It would increase national pride.",
          "Athletes promote peace and fair play.",
          "Foreign visitors respect Japanese athletes.",
          "It shows Japan values modern achievements."
        ],
        rebuttals:[
          "Money should show historical figures.",
          "Athletes may become unpopular.",
          "Their careers are short.",
          "Some athletes may face scandals.",
          "Scientists should be honored instead.",
          "Sports achievements are not everything.",
          "Money designs should be stable.",
          "Choosing athletes causes arguments.",
          "Tradition is more important.",
          "Athletes change quickly."
        ]
      },
      {
        sentence:"We should use electronic payment.",
        pros:[
          "It is faster than cash.",
          "You don’t need to carry coins.",
          "It reduces the risk of losing money.",
          "It is easier to track spending.",
          "Many stores accept it.",
          "Useful during emergencies.",
          "Reduces need for physical money.",
          "Helps prevent spread of germs.",
          "Good for travelers.",
          "Supports digital society."
        ],
        rebuttals:[
          "Elderly people struggle with devices.",
          "Systems sometimes stop working.",
          "Cash is needed in rural areas.",
          "Risk of hacking exists.",
          "People may overspend.",
          "Fees may be charged.",
          "Phones do not support all systems.",
          "Cash works even in outages.",
          "Data might be collected.",
          "People depend too much on tech."
        ]
      },
      {
        sentence:"We should spend more money instead of saving.",
        pros:[
          "Spending supports economy.",
          "Helps small businesses.",
          "Provides rich life experiences.",
          "Money loses value over time.",
          "New things improve life.",
          "Enjoying life is important.",
          "Reduces stress.",
          "Encourages innovation.",
          "Learn by trying activities.",
          "Too much saving limits opportunities."
        ],
        rebuttals:[
          "Saving is needed for emergencies.",
          "Spending too much causes debt.",
          "Money is needed for education.",
          "Money is required after retirement.",
          "Medical costs can be high.",
          "Saving provides security.",
          "Spending gives short joy.",
          "People may regret spending.",
          "Families need stable savings.",
          "Economy may suddenly change."
        ]
      }
    ];

    const topicSelect=document.getElementById("topicSelect");
    const topicSentence=document.getElementById("topicSentence");
    const proList=document.getElementById("proList");
    const rebuttalList=document.getElementById("rebuttalList");
    const writingArea=document.getElementById("writingArea");
    const resultDiv=document.getElementById("result");
    const rateRange=document.getElementById("rateRange");
    const rateLabel=document.getElementById("rateLabel");

    function renderTopic(i){
      const t=topics[i];
      topicSentence.textContent=t.sentence;

      proList.innerHTML="";
      t.pros.forEach(p=>{
        let li=document.createElement("li");
        li.textContent=p;
        proList.appendChild(li);
      });

      rebuttalList.innerHTML="";
      t.rebuttals.forEach(r=>{
        const row=document.createElement("div");
        row.className="rebuttal-item";
        const btn=document.createElement("button");
        btn.className="small";
        btn.textContent="▶";
        btn.onclick=()=>speak(r, parseFloat(rateRange.value));
        const span=document.createElement("span");
        span.textContent=r;
        row.appendChild(btn);
        row.appendChild(span);
        rebuttalList.appendChild(row);
      });
    }

    topics.forEach((t,i)=>{
      let opt=document.createElement("option");
      opt.value=i;
      opt.textContent=t.sentence;
      topicSelect.appendChild(opt);
    });
    topicSelect.onchange=()=>renderTopic(topicSelect.value);
    renderTopic(0);

    function speak(text, rate){
      if(!window.speechSynthesis){
        alert("このブラウザでは音声読み上げに対応していません。");
        return;
      }
      const u=new SpeechSynthesisUtterance(text);
      u.lang="en-US";
      u.rate=rate || 1.0;
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }

    rateRange.oninput=()=>rateLabel.textContent=rateRange.value;
    document.getElementById("stopAllBtn").onclick=()=>speechSynthesis.cancel();

    document.getElementById("clearBtn").onclick=()=>{
      writingArea.value="";
      resultDiv.textContent="（添削結果がここに表示されます）";
    };

    document.getElementById("analyzeBtn").onclick=()=>{
      const raw = writingArea.value;
      const txt = raw.trim();
      if(!txt){
        resultDiv.textContent="何も書かれていません。";
        return;
      }
      const words = txt.split(/\s+/).length;

      let html = "";
      html += "<div class='result-section'>";
      html += "<h3>語数</h3>";
      html += "<p>" + words + " 語</p>";
      html += "<h3>あなたの解答</h3>";
      html += "<p>" + txt.replace(/\n/g,"<br>") + "</p>";
      html += "<div class='answer-audio-controls'>";
      html += "<span>自分の解答の速度：</span>";
      html += "<input type='range' id='answerRateRange' min='0.6' max='1.4' step='0.05' value='" + rateRange.value + "'>";
      html += "<span id='answerRateLabel'>" + rateRange.value + "</span>";
      html += "<button id='playAnswerBtn' class='small'>▶ 自分の解答を再生</button>";
      html += "</div>";
      html += "</div>";

      resultDiv.innerHTML = html;

      const answerRateRange = document.getElementById("answerRateRange");
      const answerRateLabel = document.getElementById("answerRateLabel");
      const btn = document.getElementById("playAnswerBtn");

      answerRateRange.addEventListener("input", () => {
        answerRateLabel.textContent = answerRateRange.value;
      });

      btn.onclick = () => speak(raw, parseFloat(answerRateRange.value));
    };
  </script>

</body>
</html>
